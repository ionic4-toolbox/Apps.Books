<ion-item *ngIf="visible && isFormControl && !isControl('Captcha')" [formGroup]="formGroup" [class.invalid]="invalid">
	<ion-label *ngIf="label"
		[color]="color"
		[position]="position"
		[class]="css.label">{{label}}</ion-label>
	<ion-input *ngIf="isControl('TextBox')"
		[formControlName]="formControlName"
		[type]="type"
		[placeholder]="placeholder"
		[class]="css.control"
		[required]="required"
		[readonly]="readonly"
		[autofocus]="autofocus"
		[min]="min"
		[max]="max"
		[minlength]="minLength"
		[maxlength]="maxLength"
		[clearOnEdit]="clearOnEdit"
		[attr.autofocus]="!!autofocus"
		[attr.style]="style.control"></ion-input>
	<ion-textarea *ngIf="isControl('TextArea')" rows="4"
		[formControlName]="formControlName"
		[placeholder]="placeholder"
		[class]="css.control"
		[required]="required"
		[readonly]="readonly"
		[minlength]="minLength"
		[maxlength]="maxLength"
		[clearOnEdit]="clearOnEdit"
		[attr.autofocus]="!!autofocus"
		[attr.style]="style.control"></ion-textarea>
</ion-item>

<ion-item *ngIf="visible && description && isFormControl && !isControl('Captcha')">
	<label
		[class]="css.description"
		[style]="style.description">{{description}}</label>
</ion-item>
	
<div *ngIf="visible && isFormControl && isControl('Captcha')" class="captcha">

	<ion-item [formGroup]="formGroup" [class.invalid]="invalid">
		<ion-label *ngIf="label"
			[color]="color"
			[position]="position"
			[class]="css.label">{{label}}</ion-label>
		<ion-input type="text" style="text-transform:uppercase"
			[formControlName]="formControlName"
			[placeholder]="placeholder"
			[required]="required"
			[autofocus]="autofocus"
			[min]="min"
			[max]="max"
			[minlength]="minLength"
			[maxlength]="maxLength"
			[clearOnEdit]="clearOnEdit"
			[attr.autofocus]="!!autofocus"></ion-input>
	</ion-item>

	<ion-item *ngIf="description">
		<label
			[class]="css.description"
			[style]="style.description">{{description}}</label>
	</ion-item>

	<ion-item>
		<ion-button fill="clear" (click)="refreshCaptcha()">
			<ion-icon icon="refresh"></ion-icon>
		</ion-button>
		<img *ngIf="extras['Uri']" [src]="extras['Uri']" slot="start" />
	</ion-item>

</div>

<ion-list-header *ngIf="visible && label && (isFormGroup || isFormArray)"
	[color]="color"
	[class]="css.label">{{label}}</ion-list-header>

<div *ngIf="visible && isFormGroup">
	<app-form-element *ngFor="let ctrl of subControls; trackBy: trackControl"
		[formGroup]="subFormGroup"
		[control]="ctrl"></app-form-element>
</div>

<div *ngIf="visible && isSimpleFormArray">
	<app-form-element *ngFor="let ctrl of subControls; let idx = index; trackBy: trackControl"
		[formGroup]="subFormGroup"
		[control]="ctrl"
		[index]="idx"></app-form-element>
</div>

<div *ngIf="visible && isComplexFormArray">
	<div *ngFor="let ctrl of subControls; let idx = index; trackBy: trackControl">
		<ion-list-header *ngIf="getSubLabel(ctrl)"
			[color]="getSubColor(ctrl)"
			[class]="getSubCss(ctrl)">{{getSubLabel(ctrl)}}</ion-list-header>
		<app-form-element *ngFor="let subctrl of getSubControls(ctrl); trackBy: trackControl"
			[formGroup]="getSubFormGroup(idx)"
			[control]="subctrl"></app-form-element>
	</div>
</div>